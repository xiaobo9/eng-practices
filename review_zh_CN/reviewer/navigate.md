# Navigating a CL in review 代码审查导览

## Summary 简介

Now that you know [what to look for](looking-for.md), 审查散布在多个文件中的代码最有效的方式是什么？

1. 代码变更是否有意义? 是否有良好的描述信息[description](../developer/cl-descriptions.md)?
2. 有限审查代码变更中的关键部分。代码是否有良好的设计？
3. 以适当的顺序审查代码变更中的其他部分。

## 第一步：整体上了解代码变化内容 {#step_one}

查看代码变更描述信息 [CL description](../developer/cl-descriptions.md) 整体上了解代码变更做了什么。

这次的代码变化是否有必要，是否有意义? 如果这次代码修改压根不应该发生，请立即回应开发人员并说明为什么这些代码不应该修改。

当你拒绝像这样的代码修改时，向开发人员建议他们应该怎么做也是一个好主意。

例如，你可以说：“看起来你为此做了一些出色的工作，谢谢！但是，事实上，我们将要删除你修改到的 FooWidget 系统，因此我们现在不希望对其进行任何新的修改。相反，你有兴趣重构我们的 BarWidget 类吗？”

请注意，审阅者不仅拒绝了当前的 CL 并提出了替代建议，而且是“认真”的提出建议。这种礼貌很重要，因为即使我们不同意，我们也想表明，作为开发人员我们彼此尊重。

如果你收到好几个你认为不应该发生的代码变更，那么应该考虑重新设计团队的开发流程或者外部共享这的推送流程，以便在修改代码前，进行更多的交流。

最好在开发人员做了大量的必须舍弃或者重构的代码修改之前告诉他们“不”。

## 第二部：审查代码的主要部分 {#step_two}

查找属于此CL的“主要”部分的文件。 通常，一个文件的逻辑更改数量最多，这是CL的主要部分。 首先看这些主要部分。 这有助于为CL的所有较小部分提供上下文，并通常加快执行代码审阅的速度。 如果CL太大，您无法确定哪些部分是主要零件，请询问开发人员您应该首先看什么，或要求他们[将CL拆分为多个CL]（../ developer / small-cls.MD）。

寻找代码变更中的主要部分。通常，会有一个文件发生了很多修改的文件，而它恰好是主要修改内容。

首先查看这些主要部分。这有助于理解代码变更的上下文背景信息，并可能加速进行代码审查的速度。

如果这次代码变更修改了太多的内容，多到你难以识别出主要的变更内容。

让开发人员告诉你应该先看什么，或者让他们把代码分成多次进行修改，审查 [split up the CL into multiple CLs](../developer/small-cls.md)。

如果您发现 CL 的主要部分存在一些重要的设计问题，那么即使你现在没有时间审查 CL 的其余部分，也应立即发送相关问题评论。

实际上，如果设计问题足够严重，那么其余的很多代码都将消失，而且无论如何都不会变得很重要，这时再复查 CL 的其余部分就是浪费时间。

立即评论这些重要设计缺陷的两个主要原因：

- 经常地，开发人员通常推送一个 CL 后，在等待代码审查的时候，立马基于该 CL 开始新的工作内容。
  如果你审查的代码中有主要涉及问题，他们也将不得不重构稍后的修改。
  你需要阻止他们在错误的基础上做更多额外的工作。
- 重大的设计变更要比小变化花费更长的时间。开发人员几乎都会有工作截止日期，为了在截止日期前完成工作并在代码库中保留高质量的代码，开发人员需要尽快开始这次代码变更中的任何重要的重构工作。

## 第三步：以适当的顺序审查代码变更中的其他部分 {#step_three}

确认CL整体上没有大的设计问题后，请尝试找出逻辑顺序来浏览文件，同时还要确保不要错过对任何文件的审查。 通常，在浏览了主要文件之后，按照代码审查工具向您展示它们的顺序浏览每个文件是最简单的。 有时在阅读主要代码之前先阅读测试也是有帮助的，因为这样您就可以知道更改应该做什么。

确定代码修改中没有大的设计缺陷后，请尝试找出逻辑顺序来阅览代码文件，同时确保不要错过对任何文件的审查。

通常，在阅读了主要文件之后，按照代码审查工具展现的顺序浏览每个文件是最简单的。

有时在阅读主要代码之前阅读测试用例也是有帮助的，因为这样你可以了解到这些代码变更应该做什么。

Next: [Speed of Code Reviews 代码审查速度](speed.md)
